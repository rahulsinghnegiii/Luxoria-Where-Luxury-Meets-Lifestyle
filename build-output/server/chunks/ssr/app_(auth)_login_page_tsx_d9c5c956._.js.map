{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/app/%28auth%29/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '../../../lib/authContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isClient, setIsClient] = useState(false);\r\n  \r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const redirectTo = searchParams.get('redirect') || '/';\r\n  \r\n  // Add a try-catch block for accessing auth context\r\n  let authContext;\r\n  try {\r\n    authContext = useAuth();\r\n  } catch (err) {\r\n    console.error(\"Error accessing auth context:\", err);\r\n    authContext = {\r\n      user: null,\r\n      signIn: async () => {},\r\n      error: \"Authentication system unavailable\"\r\n    };\r\n  }\r\n  \r\n  const { user, signIn, error: authError } = authContext;\r\n\r\n  // Set isClient to true when component mounts (client-side only)\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  // Redirect if user is already logged in\r\n  useEffect(() => {\r\n    if (user) {\r\n      router.push(redirectTo);\r\n    }\r\n  }, [user, router, redirectTo]);\r\n\r\n  // Update the error state when auth context error changes\r\n  useEffect(() => {\r\n    if (authError) {\r\n      setError(authError);\r\n      setIsLoading(false);\r\n      toast.error(authError);\r\n    }\r\n  }, [authError]);\r\n\r\n  // Show toast when error changes\r\n  useEffect(() => {\r\n    if (error) {\r\n      toast.error(error);\r\n    }\r\n  }, [error]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n    \r\n    // Show a toast to indicate we're attempting login\r\n    toast.loading('Attempting to sign in...', { id: 'login-attempt' });\r\n\r\n    try {\r\n      if (typeof signIn !== 'function') {\r\n        throw new Error('Authentication system unavailable');\r\n      }\r\n      \r\n      await signIn(email, password);\r\n      toast.success('Successfully logged in!', { id: 'login-attempt' });\r\n      // No need to redirect here, the useEffect will handle it\r\n    } catch (err: any) {\r\n      console.error('Login error:', err);\r\n      const errorMessage = err.message || 'Failed to sign in';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage, { id: 'login-attempt' });\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Sign in to your account</h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-700\">\r\n            Or{' '}\r\n            <Link href=\"/signup\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n              create a new account\r\n            </Link>\r\n          </p>\r\n        </div>\r\n        \r\n        {error && (\r\n          <div className=\"bg-red-50 border-l-4 border-red-400 p-4\">\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg className=\"h-5 w-5 text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm text-red-700\">{error}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Only render the form on client-side to avoid hydration issues */}\r\n        {isClient ? (\r\n          <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n            <div className=\"rounded-md shadow-sm -space-y-px\">\r\n              <div>\r\n                <label htmlFor=\"email-address\" className=\"sr-only\">Email address</label>\r\n                <input\r\n                  id=\"email-address\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                  className=\"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-700 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  placeholder=\"Email address\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  suppressHydrationWarning\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"sr-only\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-700 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  placeholder=\"Password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  id=\"remember-me\"\r\n                  name=\"remember-me\"\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                  Remember me\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"text-sm\">\r\n                <Link href=\"/forgot-password\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n                  Forgot your password?\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400\"\r\n              >\r\n                {isLoading ? (\r\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                ) : (\r\n                  <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\r\n                    <svg className=\"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                      <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </span>\r\n                )}\r\n                Sign in\r\n              </button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div className=\"mt-8 space-y-6\">\r\n            <div className=\"h-20 bg-gray-100 animate-pulse rounded-md\"></div>\r\n            <div className=\"h-10 bg-gray-100 animate-pulse rounded-md\"></div>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"mt-4 text-center\">\r\n          <Link href=\"/\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n            Back to Home\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}