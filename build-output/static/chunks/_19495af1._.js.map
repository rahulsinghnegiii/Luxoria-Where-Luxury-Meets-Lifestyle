{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/lib/imageUtils.ts"],"sourcesContent":["/**\r\n * Utility functions for handling images in the application\r\n */\r\nimport { transformFirebaseStorageUrl } from './firebaseUtils';\r\n\r\n/**\r\n * Checks if a URL is a placeholder.com URL that might fail\r\n */\r\nexport const isPlaceholderUrl = (url: string): boolean => {\r\n  return url && typeof url === 'string' && \r\n    (url.includes('via.placeholder.com') || \r\n     url.includes('placeholder.com') || \r\n     url.includes('placehold.co'));\r\n};\r\n\r\n/**\r\n * Checks if a URL is a Firebase Storage URL\r\n */\r\nexport const isFirebaseStorageUrl = (url: string): boolean => {\r\n  return url && typeof url === 'string' && \r\n    (url.includes('firebasestorage.googleapis.com') || \r\n     url.includes('firebasestorage.app'));\r\n};\r\n\r\n/**\r\n * Generates a base64 SVG image as a fallback for failed placeholder URLs\r\n */\r\nexport const generateFallbackImage = (text: string = 'Image'): string => {\r\n  // Extract filename from placeholder URL if possible\r\n  let displayText = text;\r\n  try {\r\n    if (text.includes('text=')) {\r\n      const encodedText = text.split('text=')[1].split('&')[0];\r\n      displayText = decodeURIComponent(encodedText);\r\n    }\r\n  } catch (e) {\r\n    console.error('Error extracting text from placeholder URL:', e);\r\n  }\r\n\r\n  // Generate a colored rectangle with the filename\r\n  const colors = [\r\n    '#4285F4', // Google Blue\r\n    '#34A853', // Google Green\r\n    '#FBBC05', // Google Yellow\r\n    '#EA4335', // Google Red\r\n    '#5E35B1', // Deep Purple\r\n    '#1E88E5', // Blue\r\n    '#43A047', // Green\r\n    '#E53935', // Red\r\n    '#FB8C00', // Orange\r\n    '#00ACC1', // Cyan\r\n  ];\r\n  const color = colors[Math.floor(Math.random() * colors.length)];\r\n  \r\n  const svgContent = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"600\" height=\"400\" viewBox=\"0 0 600 400\">\r\n      <rect width=\"600\" height=\"400\" fill=\"${color}\" />\r\n      <text x=\"50%\" y=\"50%\" font-family=\"Arial\" font-size=\"24\" text-anchor=\"middle\" fill=\"white\">${displayText}</text>\r\n    </svg>\r\n  `;\r\n  \r\n  // Convert SVG to base64 data URL\r\n  const base64Image = `data:image/svg+xml;base64,${btoa(svgContent.trim())}`;\r\n  return base64Image;\r\n};\r\n\r\n/**\r\n * Route a Firebase Storage URL through our proxy to avoid CORS issues\r\n */\r\nexport const getProxiedFirebaseUrl = (url: string): string => {\r\n  if (!url || typeof url !== 'string') return '';\r\n  \r\n  // If it's already a proxied URL or not a Firebase Storage URL, return as is\r\n  if (!isFirebaseStorageUrl(url) || url.includes('/api/firebase-image')) {\r\n    return url;\r\n  }\r\n  \r\n  // First transform the URL into proper Firebase Storage format\r\n  const transformedUrl = transformFirebaseStorageUrl(url);\r\n  \r\n  // Then proxy it through our API route\r\n  return `/api/firebase-image?url=${encodeURIComponent(transformedUrl)}`;\r\n};\r\n\r\n/**\r\n * Gets a safe image URL, replacing placeholder URLs with base64 images if needed\r\n * and transforming Firebase Storage URLs to direct download URLs\r\n */\r\nexport const getSafeImageUrl = (originalUrl: string): string => {\r\n  // If it's not a valid URL, return a fallback\r\n  if (!originalUrl || typeof originalUrl !== 'string') {\r\n    return generateFallbackImage('Image');\r\n  }\r\n  \r\n  // If it's a placeholder URL, replace with a base64 image\r\n  if (isPlaceholderUrl(originalUrl)) {\r\n    return generateFallbackImage(originalUrl);\r\n  }\r\n  \r\n  // If it's a Firebase Storage URL, use our proxy route\r\n  if (isFirebaseStorageUrl(originalUrl)) {\r\n    return getProxiedFirebaseUrl(originalUrl);\r\n  }\r\n  \r\n  // Otherwise, return the original URL\r\n  return originalUrl;\r\n}; "],"names":[],"mappings":"AAAA;;CAEC;;;;;;;AACD;;AAKO,MAAM,mBAAmB,CAAC;IAC/B,OAAO,OAAO,OAAO,QAAQ,YAC3B,CAAC,IAAI,QAAQ,CAAC,0BACb,IAAI,QAAQ,CAAC,sBACb,IAAI,QAAQ,CAAC,eAAe;AACjC;AAKO,MAAM,uBAAuB,CAAC;IACnC,OAAO,OAAO,OAAO,QAAQ,YAC3B,CAAC,IAAI,QAAQ,CAAC,qCACb,IAAI,QAAQ,CAAC,sBAAsB;AACxC;AAKO,MAAM,wBAAwB,CAAC,OAAe,OAAO;IAC1D,oDAAoD;IACpD,IAAI,cAAc;IAClB,IAAI;QACF,IAAI,KAAK,QAAQ,CAAC,UAAU;YAC1B,MAAM,cAAc,KAAK,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;YACxD,cAAc,mBAAmB;QACnC;IACF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,+CAA+C;IAC/D;IAEA,iDAAiD;IACjD,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM,QAAQ,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,MAAM,EAAE;IAE/D,MAAM,aAAa,CAAC;;2CAEqB,EAAE,MAAM;iGAC8C,EAAE,YAAY;;EAE7G,CAAC;IAED,iCAAiC;IACjC,MAAM,cAAc,CAAC,0BAA0B,EAAE,KAAK,WAAW,IAAI,KAAK;IAC1E,OAAO;AACT;AAKO,MAAM,wBAAwB,CAAC;IACpC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,4EAA4E;IAC5E,IAAI,CAAC,qBAAqB,QAAQ,IAAI,QAAQ,CAAC,wBAAwB;QACrE,OAAO;IACT;IAEA,8DAA8D;IAC9D,MAAM,iBAAiB,CAAA,GAAA,uHAAA,CAAA,8BAA2B,AAAD,EAAE;IAEnD,sCAAsC;IACtC,OAAO,CAAC,wBAAwB,EAAE,mBAAmB,iBAAiB;AACxE;AAMO,MAAM,kBAAkB,CAAC;IAC9B,6CAA6C;IAC7C,IAAI,CAAC,eAAe,OAAO,gBAAgB,UAAU;QACnD,OAAO,sBAAsB;IAC/B;IAEA,yDAAyD;IACzD,IAAI,iBAAiB,cAAc;QACjC,OAAO,sBAAsB;IAC/B;IAEA,sDAAsD;IACtD,IAAI,qBAAqB,cAAc;QACrC,OAAO,sBAAsB;IAC/B;IAEA,qCAAqC;IACrC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/lib/firebaseStorageHelper.ts"],"sourcesContent":["/**\r\n * Firebase Storage Helper for managing and transforming Firebase Storage URLs\r\n * This file centralizes all operations related to Firebase Storage URLs\r\n */\r\n\r\n/**\r\n * Transform a Firebase Storage URL to a direct download URL format\r\n * Handles the various formats that Firebase Storage URLs can have\r\n */\r\nexport function getDirectDownloadUrl(url: string): string {\r\n  if (!url || typeof url !== 'string') return '';\r\n  \r\n  // If it's not a Firebase Storage URL, return as is\r\n  if (!url.includes('firebasestorage.googleapis.com') && !url.includes('firebasestorage.app')) {\r\n    return url;\r\n  }\r\n  \r\n  try {\r\n    // Case 1: URL with ?name= parameter\r\n    // Format: https://firebasestorage.googleapis.com/v0/b/[bucket]/o?name=[path]\r\n    if (url.includes('/o?name=')) {\r\n      // Extract the bucket name\r\n      const bucketPart = url.split('/b/')[1];\r\n      const bucket = bucketPart.split('.')[0];\r\n      \r\n      // Extract the file path from the name parameter\r\n      let path = '';\r\n      if (url.includes('name=')) {\r\n        path = url.split('name=')[1];\r\n        // Remove any additional query parameters\r\n        if (path.includes('&')) {\r\n          path = path.split('&')[0];\r\n        }\r\n      }\r\n      \r\n      // Decode then re-encode the path properly\r\n      const decodedPath = decodeURIComponent(path);\r\n      \r\n      // Build a proper download URL\r\n      return `https://firebasestorage.googleapis.com/v0/b/${bucket}/o/${encodeURIComponent(decodedPath)}?alt=media`;\r\n    }\r\n    \r\n    // Case 2: URL with /o/ path but missing alt=media\r\n    // Format: https://firebasestorage.googleapis.com/v0/b/[bucket]/o/[path]\r\n    if (url.includes('/o/') && !url.includes('alt=media')) {\r\n      // Add alt=media parameter\r\n      return url.includes('?') ? `${url}&alt=media` : `${url}?alt=media`;\r\n    }\r\n    \r\n    // Case 3: URL already has /o/ and alt=media, so it's good to go\r\n    if (url.includes('/o/') && url.includes('alt=media')) {\r\n      return url;\r\n    }\r\n    \r\n    // Case 4: Fallback for any other Firebase Storage URL format\r\n    console.warn('Unknown Firebase Storage URL format:', url);\r\n    return url.includes('?') ? `${url}&alt=media` : `${url}?alt=media`;\r\n  } catch (error) {\r\n    console.error('Error transforming Firebase Storage URL:', error);\r\n    return url;\r\n  }\r\n}\r\n\r\n/**\r\n * Get a proxied URL through our API route to avoid CORS issues\r\n */\r\nexport function getProxiedUrl(url: string): string {\r\n  if (!url || typeof url !== 'string') return '';\r\n  \r\n  // Don't proxy non-Firebase URLs or already proxied URLs\r\n  if ((!url.includes('firebasestorage.googleapis.com') && !url.includes('firebasestorage.app')) \r\n      || url.includes('/api/firebase-image')) {\r\n    return url;\r\n  }\r\n  \r\n  // First transform to direct download URL\r\n  const directUrl = getDirectDownloadUrl(url);\r\n  \r\n  // Then proxy it\r\n  return `/api/firebase-image?url=${encodeURIComponent(directUrl)}`;\r\n}\r\n\r\n/**\r\n * Transform Firebase Storage URL if needed, otherwise returns original URL\r\n * This is a safe function to call on any URL\r\n */\r\nexport function getSafeImageUrl(url: string): string {\r\n  if (!url || typeof url !== 'string') return '';\r\n  \r\n  // Handle Firebase Storage URLs\r\n  if (url.includes('firebasestorage.googleapis.com') || url.includes('firebasestorage.app')) {\r\n    return getProxiedUrl(url);\r\n  }\r\n  \r\n  // Return other URLs as is\r\n  return url;\r\n} "],"names":[],"mappings":"AAAA;;;CAGC,GAED;;;CAGC;;;;;AACM,SAAS,qBAAqB,GAAW;IAC9C,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,mDAAmD;IACnD,IAAI,CAAC,IAAI,QAAQ,CAAC,qCAAqC,CAAC,IAAI,QAAQ,CAAC,wBAAwB;QAC3F,OAAO;IACT;IAEA,IAAI;QACF,oCAAoC;QACpC,6EAA6E;QAC7E,IAAI,IAAI,QAAQ,CAAC,aAAa;YAC5B,0BAA0B;YAC1B,MAAM,aAAa,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE;YACtC,MAAM,SAAS,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;YAEvC,gDAAgD;YAChD,IAAI,OAAO;YACX,IAAI,IAAI,QAAQ,CAAC,UAAU;gBACzB,OAAO,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAE;gBAC5B,yCAAyC;gBACzC,IAAI,KAAK,QAAQ,CAAC,MAAM;oBACtB,OAAO,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE;gBAC3B;YACF;YAEA,0CAA0C;YAC1C,MAAM,cAAc,mBAAmB;YAEvC,8BAA8B;YAC9B,OAAO,CAAC,4CAA4C,EAAE,OAAO,GAAG,EAAE,mBAAmB,aAAa,UAAU,CAAC;QAC/G;QAEA,kDAAkD;QAClD,wEAAwE;QACxE,IAAI,IAAI,QAAQ,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,cAAc;YACrD,0BAA0B;YAC1B,OAAO,IAAI,QAAQ,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,GAAG,GAAG,IAAI,UAAU,CAAC;QACpE;QAEA,gEAAgE;QAChE,IAAI,IAAI,QAAQ,CAAC,UAAU,IAAI,QAAQ,CAAC,cAAc;YACpD,OAAO;QACT;QAEA,6DAA6D;QAC7D,QAAQ,IAAI,CAAC,wCAAwC;QACrD,OAAO,IAAI,QAAQ,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,GAAG,GAAG,IAAI,UAAU,CAAC;IACpE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4CAA4C;QAC1D,OAAO;IACT;AACF;AAKO,SAAS,cAAc,GAAW;IACvC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,wDAAwD;IACxD,IAAI,AAAC,CAAC,IAAI,QAAQ,CAAC,qCAAqC,CAAC,IAAI,QAAQ,CAAC,0BAC/D,IAAI,QAAQ,CAAC,wBAAwB;QAC1C,OAAO;IACT;IAEA,yCAAyC;IACzC,MAAM,YAAY,qBAAqB;IAEvC,gBAAgB;IAChB,OAAO,CAAC,wBAAwB,EAAE,mBAAmB,YAAY;AACnE;AAMO,SAAS,gBAAgB,GAAW;IACzC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,+BAA+B;IAC/B,IAAI,IAAI,QAAQ,CAAC,qCAAqC,IAAI,QAAQ,CAAC,wBAAwB;QACzF,OAAO,cAAc;IACvB;IAEA,0BAA0B;IAC1B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/components/FirebaseImage.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Image, { ImageProps } from 'next/image';\r\nimport { generateFallbackImage } from '../lib/imageUtils';\r\nimport { getSafeImageUrl } from '../lib/firebaseStorageHelper';\r\n\r\ninterface FirebaseImageProps extends Omit<ImageProps, 'src'> {\r\n  src: string;\r\n  fallbackText?: string;\r\n}\r\n\r\n/**\r\n * A component specifically designed to handle Firebase Storage images with proper CORS error handling\r\n * Uses a server-side proxy to avoid CORS issues with Firebase Storage\r\n */\r\nexport default function FirebaseImage({\r\n  src,\r\n  alt,\r\n  width = 300,\r\n  height = 300,\r\n  fallbackText,\r\n  priority = false,\r\n  loading,\r\n  ...props\r\n}: FirebaseImageProps) {\r\n  const [error, setError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // Store the safe image URL\r\n  const [safeSrc, setSafeSrc] = useState<string | null>(null);\r\n  \r\n  useEffect(() => {\r\n    if (!src || typeof src !== 'string' || src === '') {\r\n      // Use fallback image for empty or invalid src\r\n      setSafeSrc(generateFallbackImage(fallbackText || alt?.toString() || 'Image'));\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Get a safe, CORS-friendly image URL\r\n      const safeUrl = getSafeImageUrl(src);\r\n      console.log('Using safe image URL:', { original: src, transformed: safeUrl });\r\n      setSafeSrc(safeUrl);\r\n    } catch (err) {\r\n      console.error('Error processing image URL:', err);\r\n      setSafeSrc(generateFallbackImage(fallbackText || alt?.toString() || 'Image'));\r\n    }\r\n    \r\n    // Reset error state\r\n    setError(false);\r\n    setIsLoading(true);\r\n  }, [src, alt, fallbackText]);\r\n\r\n  // Generate a fallback image if needed\r\n  const fallbackImage = generateFallbackImage(fallbackText || alt?.toString() || 'Image');\r\n  \r\n  // Use the fallback if there's an error or if safeSrc is null\r\n  const imageSrc = error || !safeSrc ? fallbackImage : safeSrc;\r\n  \r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n  };\r\n  \r\n  const handleError = () => {\r\n    console.warn(`Failed to load image: ${safeSrc}`);\r\n    setError(true);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // Only render Image component when we have a valid src\r\n  if (!imageSrc) {\r\n    return (\r\n      <div \r\n        className=\"relative overflow-hidden bg-gray-100 flex items-center justify-center\"\r\n        style={{ width, height, background: '#f3f4f6' }}\r\n      >\r\n        <div className=\"w-8 h-8 border-2 border-gray-200 border-t-gray-400 rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Create image props\r\n  const imageProps: any = {\r\n    src: imageSrc,\r\n    alt: alt || \"Image\",\r\n    width: width,\r\n    height: height,\r\n    onError: handleError,\r\n    onLoad: handleLoad,\r\n    ...props,\r\n    className: `${props.className || ''} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`,\r\n  };\r\n\r\n  // Handle priority vs loading prop correctly\r\n  if (priority) {\r\n    imageProps.priority = true;\r\n    // Don't set loading when priority is true\r\n  } else if (loading) {\r\n    imageProps.loading = loading;\r\n  } else {\r\n    imageProps.loading = 'lazy';\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative overflow-hidden\" style={{ background: '#f3f4f6' }}>\r\n      {isLoading && (\r\n        <div \r\n          className=\"absolute inset-0 flex items-center justify-center bg-gray-100\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <div className=\"w-8 h-8 border-2 border-gray-200 border-t-gray-400 rounded-full animate-spin\"></div>\r\n        </div>\r\n      )}\r\n      \r\n      <Image {...imageProps} />\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAgBe,SAAS,cAAc,EACpC,GAAG,EACH,GAAG,EACH,QAAQ,GAAG,EACX,SAAS,GAAG,EACZ,YAAY,EACZ,WAAW,KAAK,EAChB,OAAO,EACP,GAAG,OACgB;;IACnB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,2BAA2B;IAC3B,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,OAAO,OAAO,QAAQ,YAAY,QAAQ,IAAI;gBACjD,8CAA8C;gBAC9C,WAAW,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;gBACpE,aAAa;gBACb;YACF;YAEA,IAAI;gBACF,sCAAsC;gBACtC,MAAM,UAAU,CAAA,GAAA,+HAAA,CAAA,kBAAe,AAAD,EAAE;gBAChC,QAAQ,GAAG,CAAC,yBAAyB;oBAAE,UAAU;oBAAK,aAAa;gBAAQ;gBAC3E,WAAW;YACb,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,WAAW,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;YACtE;YAEA,oBAAoB;YACpB,SAAS;YACT,aAAa;QACf;kCAAG;QAAC;QAAK;QAAK;KAAa;IAE3B,sCAAsC;IACtC,MAAM,gBAAgB,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;IAE/E,6DAA6D;IAC7D,MAAM,WAAW,SAAS,CAAC,UAAU,gBAAgB;IAErD,MAAM,aAAa;QACjB,aAAa;IACf;IAEA,MAAM,cAAc;QAClB,QAAQ,IAAI,CAAC,CAAC,sBAAsB,EAAE,SAAS;QAC/C,SAAS;QACT,aAAa;IACf;IAEA,uDAAuD;IACvD,IAAI,CAAC,UAAU;QACb,qBACE,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE;gBAAO;gBAAQ,YAAY;YAAU;sBAE9C,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBAAqB;IACrB,MAAM,aAAkB;QACtB,KAAK;QACL,KAAK,OAAO;QACZ,OAAO;QACP,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,GAAG,KAAK;QACR,WAAW,GAAG,MAAM,SAAS,IAAI,GAAG,CAAC,EAAE,YAAY,cAAc,cAAc,gCAAgC,CAAC;IAClH;IAEA,4CAA4C;IAC5C,IAAI,UAAU;QACZ,WAAW,QAAQ,GAAG;IACtB,0CAA0C;IAC5C,OAAO,IAAI,SAAS;QAClB,WAAW,OAAO,GAAG;IACvB,OAAO;QACL,WAAW,OAAO,GAAG;IACvB;IAEA,qBACE,6LAAC;QAAI,WAAU;QAA2B,OAAO;YAAE,YAAY;QAAU;;YACtE,2BACC,6LAAC;gBACC,WAAU;gBACV,eAAY;0BAEZ,cAAA,6LAAC;oBAAI,WAAU;;;;;;;;;;;0BAInB,6LAAC,gIAAA,CAAA,UAAK;gBAAE,GAAG,UAAU;;;;;;;;;;;;AAG3B;GAvGwB;KAAA","debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/app/%28admin%29/dashboard/products/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, use } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '../../../../../lib/authContext';\nimport { \n  getProductById, \n  updateProduct, \n  deleteProduct, \n  uploadProductImage,\n  transformFirebaseStorageUrl \n} from '../../../../../lib/firebaseUtils';\nimport { Product } from '../../../../../lib/types';\nimport Link from 'next/link';\nimport FirebaseImage from '../../../../../components/FirebaseImage';\nimport { toast } from 'react-hot-toast';\nimport { getProxiedFirebaseUrl } from '../../../../../lib/imageUtils';\n\n// Categories for dropdown\nconst categories = [\n  'electronics',\n  'clothing',\n  'accessories',\n  'home',\n  'books',\n  'sports',\n  'beauty',\n  'toys',\n  'kitchen',\n];\n\nexport default function EditProductPage({ params }: { params: { id: string } }) {\n  // Unwrap the params Promise using React.use()\n  const unwrappedParams = use(params);\n  const productId = unwrappedParams.id;\n  \n  const router = useRouter();\n  const { user, isAdmin } = useAuth();\n  \n  // Product state\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [price, setPrice] = useState('');\n  const [category, setCategory] = useState('');\n  const [stock, setStock] = useState('');\n  const [features, setFeatures] = useState<string[]>([]);\n  const [images, setImages] = useState<string[]>([]);\n  \n  // UI state\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [imageUploading, setImageUploading] = useState(false);\n  const [newImages, setNewImages] = useState<File[]>([]);\n  const [imagePreviews, setImagePreviews] = useState<string[]>([]);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  // Check auth\n  useEffect(() => {\n    if (user && !isLoading) {\n      setLoading(false);\n    }\n  }, [user, isLoading]);\n\n  // Fetch product\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        if (!productId) return;\n        \n        const product = await getProductById(productId);\n        \n        if (!product) {\n          toast.error('Product not found');\n          router.push('/dashboard/products');\n          return;\n        }\n        \n        // Set product data\n        setName(product.name);\n        setDescription(product.description);\n        setPrice(product.price.toString());\n        setCategory(product.category);\n        setStock(product.stock.toString());\n        setFeatures(product.features || []);\n        setImages(product.images || []);\n        \n      } catch (error) {\n        console.error('Error fetching product:', error);\n        toast.error('Failed to load product');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    fetchProduct();\n  }, [productId, router]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    \n    switch (name) {\n      case 'name': setName(value); break;\n      case 'description': setDescription(value); break;\n      case 'price': setPrice(value); break;\n      case 'category': setCategory(value); break;\n      case 'stock': setStock(value); break;\n    }\n    \n    // Clear error\n    if (errors[name]) {\n      setErrors({ ...errors, [name]: '' });\n    }\n  };\n\n  const handleFeatureChange = (index: number, value: string) => {\n    const newFeatures = [...features];\n    newFeatures[index] = value;\n    setFeatures(newFeatures);\n  };\n\n  const addFeatureField = () => {\n    setFeatures([...features, '']);\n  };\n\n  const removeFeatureField = (index: number) => {\n    setFeatures(features.filter((_, i) => i !== index));\n  };\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files) return;\n    \n    const fileArray = Array.from(files);\n    setNewImages([...newImages, ...fileArray]);\n    \n    // Create and store image previews\n    const newPreviews = fileArray.map(file => URL.createObjectURL(file));\n    setImagePreviews([...imagePreviews, ...newPreviews]);\n  };\n\n  const removeImage = (index: number) => {\n    // Remove preview and revoke object URL\n    URL.revokeObjectURL(imagePreviews[index]);\n    \n    // Remove from arrays\n    const newPreviews = [...imagePreviews];\n    const newImageFiles = [...newImages];\n    newPreviews.splice(index, 1);\n    newImageFiles.splice(index, 1);\n    \n    setImagePreviews(newPreviews);\n    setNewImages(newImageFiles);\n  };\n\n  const removeExistingImage = (index: number) => {\n    const newImages = [...images];\n    newImages.splice(index, 1);\n    setImages(newImages);\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!name.trim()) {\n      newErrors.name = 'Product name is required';\n    }\n    \n    if (!description.trim()) {\n      newErrors.description = 'Description is required';\n    }\n    \n    if (!price) {\n      newErrors.price = 'Price is required';\n    } else if (isNaN(parseFloat(price)) || parseFloat(price) <= 0) {\n      newErrors.price = 'Price must be a positive number';\n    }\n    \n    if (!category) {\n      newErrors.category = 'Category is required';\n    }\n    \n    if (!stock) {\n      newErrors.stock = 'Stock quantity is required';\n    } else if (isNaN(parseInt(stock)) || parseInt(stock) < 0) {\n      newErrors.stock = 'Stock must be a non-negative number';\n    }\n    \n    if (images.length === 0 && newImages.length === 0) {\n      newErrors.images = 'At least one product image is required';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      toast.error('Please fix form errors');\n      return;\n    }\n    \n    setIsSaving(true);\n    \n    try {\n      // First upload any new images\n      let allImages = [...images];\n      \n      if (newImages.length > 0) {\n        setImageUploading(true);\n        \n        // Upload each image sequentially and gather URLs\n        for (const imageFile of newImages) {\n          try {\n            // Upload the image and transform the URL for CORS compatibility\n            const imageUrl = await uploadProductImage(imageFile);\n            \n            // Make sure the URL is correctly formatted for Firebase Storage\n            const transformedUrl = transformFirebaseStorageUrl(imageUrl);\n            \n            // Add the image URL to our array\n            allImages.push(transformedUrl);\n            toast.success(`Uploaded image: ${imageFile.name}`);\n          } catch (uploadError) {\n            console.error('Failed to upload an image:', uploadError);\n            toast.error(`Failed to upload image: ${imageFile.name}`);\n          }\n        }\n        \n        setImageUploading(false);\n      }\n      \n      // Update product with all data including new image URLs\n      const productData = {\n        name,\n        description,\n        price: parseFloat(price),\n        category,\n        stock: parseInt(stock),\n        features: features.filter(f => f.trim() !== ''), // Remove empty features\n        images: allImages,\n        updatedAt: new Date().toISOString(),\n      };\n      \n      await updateProduct(productId, productData);\n      \n      toast.success('Product updated successfully');\n      \n      // Clear new images and previews\n      imagePreviews.forEach(preview => URL.revokeObjectURL(preview));\n      setNewImages([]);\n      setImagePreviews([]);\n      \n      // Redirect back to dashboard\n      router.push('/dashboard/products');\n    } catch (error) {\n      console.error('Error updating product:', error);\n      toast.error('Failed to update product');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!productId) return;\n    \n    setIsDeleting(true);\n    \n    try {\n      await deleteProduct(productId);\n      toast.success('Product deleted successfully');\n      router.push('/dashboard/products');\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      toast.error('Failed to delete product');\n    } finally {\n      setIsDeleting(false);\n      setShowDeleteConfirm(false);\n    }\n  };\n\n  if (loading || !user || !isAdmin) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-6\"></div>\n          <div className=\"h-64 bg-gray-200 rounded mb-6\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-6\"></div>\n          <div className=\"h-64 bg-gray-200 rounded mb-6\"></div>\n          <div className=\"h-40 bg-gray-200 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Edit Product</h1>\n        <div className=\"flex space-x-4\">\n          <Link\n            href=\"/dashboard\"\n            className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-md\"\n          >\n            Cancel\n          </Link>\n          <button\n            onClick={() => setShowDeleteConfirm(true)}\n            className=\"bg-red-100 hover:bg-red-200 text-red-700 py-2 px-4 rounded-md\"\n            disabled={isDeleting}\n          >\n            {isDeleting ? 'Deleting...' : 'Delete Product'}\n          </button>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"bg-white shadow rounded-lg overflow-hidden mb-8\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <h2 className=\"text-xl font-medium text-gray-900 mb-4\">Basic Information</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Product Name\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"name\"\n                  name=\"name\"\n                  value={name}\n                  onChange={handleInputChange}\n                  className={`w-full border ${errors.name ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n                />\n                {errors.name && <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>}\n              </div>\n              \n              <div className=\"md:col-span-2\">\n                <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Description\n                </label>\n                <textarea\n                  id=\"description\"\n                  name=\"description\"\n                  value={description}\n                  onChange={handleInputChange}\n                  rows={4}\n                  className={`w-full border ${errors.description ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n                />\n                {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n              </div>\n              \n              <div>\n                <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Price ($)\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"price\"\n                  name=\"price\"\n                  value={price}\n                  onChange={handleInputChange}\n                  className={`w-full border ${errors.price ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n                />\n                {errors.price && <p className=\"mt-1 text-sm text-red-600\">{errors.price}</p>}\n              </div>\n              \n              <div>\n                <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Category\n                </label>\n                <select\n                  id=\"category\"\n                  name=\"category\"\n                  value={category}\n                  onChange={handleInputChange}\n                  className={`w-full border ${errors.category ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n                >\n                  <option value=\"\">Select Category</option>\n                  {categories.map((cat) => (\n                    <option key={cat} value={cat}>\n                      {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                    </option>\n                  ))}\n                </select>\n                {errors.category && <p className=\"mt-1 text-sm text-red-600\">{errors.category}</p>}\n              </div>\n              \n              <div>\n                <label htmlFor=\"stock\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Stock\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"stock\"\n                  name=\"stock\"\n                  min=\"0\"\n                  value={stock}\n                  onChange={handleInputChange}\n                  className={`w-full border ${errors.stock ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}\n                />\n                {errors.stock && <p className=\"mt-1 text-sm text-red-600\">{errors.stock}</p>}\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-medium text-gray-900\">Features</h2>\n              <button\n                type=\"button\"\n                onClick={addFeatureField}\n                className=\"text-sm text-indigo-600 hover:text-indigo-800\"\n              >\n                + Add Feature\n              </button>\n            </div>\n            \n            {features.map((feature, index) => (\n              <div key={index} className=\"flex mb-3\">\n                <input\n                  type=\"text\"\n                  value={feature}\n                  onChange={(e) => handleFeatureChange(index, e.target.value)}\n                  placeholder={`Feature ${index + 1}`}\n                  className=\"flex-grow border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => removeFeatureField(index)}\n                  className=\"ml-2 text-red-600 hover:text-red-800\"\n                >\n                  <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </button>\n              </div>\n            ))}\n            \n            {features.length === 0 && (\n              <p className=\"text-sm text-gray-500\">No features added yet. Click \"Add Feature\" to add product features.</p>\n            )}\n          </div>\n          \n          <div className=\"p-6\">\n            <div className=\"mb-4\">\n              <h2 className=\"text-xl font-medium text-gray-900 mb-2\">Images</h2>\n              <p className=\"text-sm text-gray-500\">Add product images (up to 5). First image will be used as the main product image.</p>\n              {errors.images && <p className=\"mt-1 text-sm text-red-600\">{errors.images}</p>}\n            </div>\n            \n            {/* Existing product images */}\n            {images.length > 0 && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Current Images</h3>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n                  {images.map((imageUrl, index) => (\n                    <div key={index} className=\"relative group\">\n                      <div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-md bg-gray-200\">\n                        <FirebaseImage\n                          src={imageUrl}\n                          alt={`Product image ${index + 1}`}\n                          width={200}\n                          height={200}\n                          className=\"object-cover object-center w-full h-full\"\n                          fallbackText={`Product ${index + 1}`}\n                        />\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeExistingImage(index)}\n                        className=\"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity\"\n                      >\n                        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {/* New image uploads */}\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Add New Images</h3>\n              <div className=\"flex items-center mb-4\">\n                <label className=\"block\">\n                  <span className=\"sr-only\">Choose images</span>\n                  <input \n                    type=\"file\"\n                    accept=\"image/*\"\n                    multiple\n                    onChange={handleImageChange}\n                    className=\"block w-full text-sm text-gray-500\n                      file:mr-4 file:py-2 file:px-4\n                      file:rounded-md file:border-0\n                      file:text-sm file:font-semibold\n                      file:bg-indigo-50 file:text-indigo-700\n                      hover:file:bg-indigo-100\n                    \"\n                  />\n                </label>\n              </div>\n              \n              {imagePreviews.length > 0 && (\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n                  {imagePreviews.map((preview, index) => (\n                    <div key={`new-${index}`} className=\"relative group\">\n                      <div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-md bg-gray-200\">\n                        <img\n                          src={preview}\n                          alt={`New upload preview ${index + 1}`}\n                          className=\"object-cover object-center w-full h-full\"\n                        />\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={() => removeImage(index)}\n                        className=\"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity\"\n                      >\n                        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-4\">\n          <Link\n            href=\"/dashboard\"\n            className=\"bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md shadow-sm hover:bg-gray-50\"\n          >\n            Cancel\n          </Link>\n          <button\n            type=\"submit\"\n            disabled={isSaving || imageUploading}\n            className=\"bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400\"\n          >\n            {isSaving ? 'Saving...' : imageUploading ? 'Uploading Images...' : 'Save Changes'}\n          </button>\n        </div>\n      </form>\n      \n      {/* Delete confirmation modal */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center\">\n          <div className=\"relative p-5 bg-white w-full max-w-md m-4 rounded-lg shadow-xl\">\n            <h3 className=\"text-xl font-medium text-gray-900 mb-4\">Delete Product</h3>\n            <p className=\"text-gray-500 mb-6\">\n              Are you sure you want to delete this product? This action cannot be undone.\n            </p>\n            <div className=\"flex justify-end space-x-4\">\n              <button\n                onClick={() => setShowDeleteConfirm(false)}\n                className=\"bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md shadow-sm hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleDelete}\n                disabled={isDeleting}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-400\"\n              >\n                {isDeleting ? 'Deleting...' : 'Delete Product'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}