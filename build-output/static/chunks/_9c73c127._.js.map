{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/lib/imageUtils.ts"],"sourcesContent":["/**\r\n * Utility functions for handling images in the application\r\n */\r\nimport { transformFirebaseStorageUrl } from './firebaseUtils';\r\n\r\n/**\r\n * Checks if a URL is a placeholder.com URL that might fail\r\n */\r\nexport const isPlaceholderUrl = (url: string): boolean => {\r\n  return url && typeof url === 'string' && \r\n    (url.includes('via.placeholder.com') || \r\n     url.includes('placeholder.com') || \r\n     url.includes('placehold.co'));\r\n};\r\n\r\n/**\r\n * Checks if a URL is a Firebase Storage URL\r\n */\r\nexport const isFirebaseStorageUrl = (url: string): boolean => {\r\n  return url && typeof url === 'string' && \r\n    url.includes('firebasestorage.googleapis.com');\r\n};\r\n\r\n/**\r\n * Generates a base64 SVG image as a fallback for failed placeholder URLs\r\n */\r\nexport const generateFallbackImage = (text: string = 'Image'): string => {\r\n  // Extract filename from placeholder URL if possible\r\n  let displayText = text;\r\n  try {\r\n    if (text.includes('text=')) {\r\n      const encodedText = text.split('text=')[1].split('&')[0];\r\n      displayText = decodeURIComponent(encodedText);\r\n    }\r\n  } catch (e) {\r\n    console.error('Error extracting text from placeholder URL:', e);\r\n  }\r\n\r\n  // Generate a colored rectangle with the filename\r\n  const colors = [\r\n    '#4285F4', // Google Blue\r\n    '#34A853', // Google Green\r\n    '#FBBC05', // Google Yellow\r\n    '#EA4335', // Google Red\r\n    '#5E35B1', // Deep Purple\r\n    '#1E88E5', // Blue\r\n    '#43A047', // Green\r\n    '#E53935', // Red\r\n    '#FB8C00', // Orange\r\n    '#00ACC1', // Cyan\r\n  ];\r\n  const color = colors[Math.floor(Math.random() * colors.length)];\r\n  \r\n  const svgContent = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"600\" height=\"400\" viewBox=\"0 0 600 400\">\r\n      <rect width=\"600\" height=\"400\" fill=\"${color}\" />\r\n      <text x=\"50%\" y=\"50%\" font-family=\"Arial\" font-size=\"24\" text-anchor=\"middle\" fill=\"white\">${displayText}</text>\r\n    </svg>\r\n  `;\r\n  \r\n  // Convert SVG to base64 data URL\r\n  const base64Image = `data:image/svg+xml;base64,${btoa(svgContent.trim())}`;\r\n  return base64Image;\r\n};\r\n\r\n/**\r\n * Route a Firebase Storage URL through our proxy to avoid CORS issues\r\n */\r\nexport const getProxiedFirebaseUrl = (url: string): string => {\r\n  if (!url || typeof url !== 'string') return '';\r\n  \r\n  // If it's already a proxied URL or not a Firebase Storage URL, return as is\r\n  if (!isFirebaseStorageUrl(url) || url.includes('/api/firebase-image')) {\r\n    return url;\r\n  }\r\n  \r\n  // Build the proxy URL\r\n  return `/api/firebase-image?url=${encodeURIComponent(url)}`;\r\n};\r\n\r\n/**\r\n * Gets a safe image URL, replacing placeholder URLs with base64 images if needed\r\n * and transforming Firebase Storage URLs to direct download URLs\r\n */\r\nexport const getSafeImageUrl = (originalUrl: string): string => {\r\n  // If it's not a valid URL, return a fallback\r\n  if (!originalUrl || typeof originalUrl !== 'string') {\r\n    return generateFallbackImage('Image');\r\n  }\r\n  \r\n  // If it's a placeholder URL, replace with a base64 image\r\n  if (isPlaceholderUrl(originalUrl)) {\r\n    return generateFallbackImage(originalUrl);\r\n  }\r\n  \r\n  // If it's a Firebase Storage URL, use our proxy route\r\n  if (isFirebaseStorageUrl(originalUrl)) {\r\n    return getProxiedFirebaseUrl(originalUrl);\r\n  }\r\n  \r\n  // Otherwise, return the original URL\r\n  return originalUrl;\r\n}; "],"names":[],"mappings":"AAAA;;CAEC;;;;;;;AAMM,MAAM,mBAAmB,CAAC;IAC/B,OAAO,OAAO,OAAO,QAAQ,YAC3B,CAAC,IAAI,QAAQ,CAAC,0BACb,IAAI,QAAQ,CAAC,sBACb,IAAI,QAAQ,CAAC,eAAe;AACjC;AAKO,MAAM,uBAAuB,CAAC;IACnC,OAAO,OAAO,OAAO,QAAQ,YAC3B,IAAI,QAAQ,CAAC;AACjB;AAKO,MAAM,wBAAwB,CAAC,OAAe,OAAO;IAC1D,oDAAoD;IACpD,IAAI,cAAc;IAClB,IAAI;QACF,IAAI,KAAK,QAAQ,CAAC,UAAU;YAC1B,MAAM,cAAc,KAAK,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;YACxD,cAAc,mBAAmB;QACnC;IACF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,+CAA+C;IAC/D;IAEA,iDAAiD;IACjD,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM,QAAQ,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,MAAM,EAAE;IAE/D,MAAM,aAAa,CAAC;;2CAEqB,EAAE,MAAM;iGAC8C,EAAE,YAAY;;EAE7G,CAAC;IAED,iCAAiC;IACjC,MAAM,cAAc,CAAC,0BAA0B,EAAE,KAAK,WAAW,IAAI,KAAK;IAC1E,OAAO;AACT;AAKO,MAAM,wBAAwB,CAAC;IACpC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU,OAAO;IAE5C,4EAA4E;IAC5E,IAAI,CAAC,qBAAqB,QAAQ,IAAI,QAAQ,CAAC,wBAAwB;QACrE,OAAO;IACT;IAEA,sBAAsB;IACtB,OAAO,CAAC,wBAAwB,EAAE,mBAAmB,MAAM;AAC7D;AAMO,MAAM,kBAAkB,CAAC;IAC9B,6CAA6C;IAC7C,IAAI,CAAC,eAAe,OAAO,gBAAgB,UAAU;QACnD,OAAO,sBAAsB;IAC/B;IAEA,yDAAyD;IACzD,IAAI,iBAAiB,cAAc;QACjC,OAAO,sBAAsB;IAC/B;IAEA,sDAAsD;IACtD,IAAI,qBAAqB,cAAc;QACrC,OAAO,sBAAsB;IAC/B;IAEA,qCAAqC;IACrC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/components/FirebaseImage.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Image, { ImageProps } from 'next/image';\r\nimport { isFirebaseStorageUrl, getSafeImageUrl, generateFallbackImage, getProxiedFirebaseUrl } from '../lib/imageUtils';\r\n\r\ninterface FirebaseImageProps extends Omit<ImageProps, 'src'> {\r\n  src: string;\r\n  fallbackText?: string;\r\n}\r\n\r\n/**\r\n * A component specifically designed to handle Firebase Storage images with proper CORS error handling\r\n * Uses a server-side proxy to avoid CORS issues with Firebase Storage\r\n */\r\nexport default function FirebaseImage({\r\n  src,\r\n  alt,\r\n  width = 300,\r\n  height = 300,\r\n  fallbackText,\r\n  priority = false,\r\n  loading,\r\n  ...props\r\n}: FirebaseImageProps) {\r\n  const [error, setError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // Store the safe image URL\r\n  const [safeSrc, setSafeSrc] = useState<string | null>(null);\r\n  \r\n  useEffect(() => {\r\n    if (!src || typeof src !== 'string' || src === '') {\r\n      // Use fallback image for empty or invalid src\r\n      setSafeSrc(generateFallbackImage(fallbackText || alt?.toString() || 'Image'));\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Process the source URL to make it safe\r\n      if (isFirebaseStorageUrl(src)) {\r\n        // Use proxy route for Firebase Storage URLs\r\n        const proxiedUrl = getProxiedFirebaseUrl(src);\r\n        console.log('Using proxied Firebase URL:', proxiedUrl);\r\n        setSafeSrc(proxiedUrl);\r\n      } else {\r\n        // Use the original URL for non-Firebase sources\r\n        setSafeSrc(src);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error processing image URL:', err);\r\n      setSafeSrc(generateFallbackImage(fallbackText || alt?.toString() || 'Image'));\r\n    }\r\n    \r\n    // Reset error state\r\n    setError(false);\r\n    setIsLoading(true);\r\n  }, [src, alt, fallbackText]);\r\n\r\n  // Generate a fallback image if needed\r\n  const fallbackImage = generateFallbackImage(fallbackText || alt?.toString() || 'Image');\r\n  \r\n  // Use the fallback if there's an error or if safeSrc is null\r\n  const imageSrc = error || !safeSrc ? fallbackImage : safeSrc;\r\n  \r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n  };\r\n  \r\n  const handleError = () => {\r\n    console.warn(`Failed to load image: ${safeSrc}`);\r\n    setError(true);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // Only render Image component when we have a valid src\r\n  if (!imageSrc) {\r\n    return (\r\n      <div \r\n        className=\"relative overflow-hidden bg-gray-100 flex items-center justify-center\"\r\n        style={{ width, height, background: '#f3f4f6' }}\r\n      >\r\n        <div className=\"w-8 h-8 border-2 border-gray-200 border-t-gray-400 rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Create image props\r\n  const imageProps: any = {\r\n    src: imageSrc,\r\n    alt: alt || \"Image\",\r\n    width: width,\r\n    height: height,\r\n    onError: handleError,\r\n    onLoad: handleLoad,\r\n    ...props,\r\n    className: `${props.className || ''} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`,\r\n  };\r\n\r\n  // Handle priority vs loading prop correctly\r\n  if (priority) {\r\n    imageProps.priority = true;\r\n    // Don't set loading when priority is true\r\n  } else if (loading) {\r\n    imageProps.loading = loading;\r\n  } else {\r\n    imageProps.loading = 'lazy';\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative overflow-hidden\" style={{ background: '#f3f4f6' }}>\r\n      {isLoading && (\r\n        <div \r\n          className=\"absolute inset-0 flex items-center justify-center bg-gray-100\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <div className=\"w-8 h-8 border-2 border-gray-200 border-t-gray-400 rounded-full animate-spin\"></div>\r\n        </div>\r\n      )}\r\n      \r\n      <Image {...imageProps} />\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAee,SAAS,cAAc,EACpC,GAAG,EACH,GAAG,EACH,QAAQ,GAAG,EACX,SAAS,GAAG,EACZ,YAAY,EACZ,WAAW,KAAK,EAChB,OAAO,EACP,GAAG,OACgB;;IACnB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,2BAA2B;IAC3B,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,OAAO,OAAO,QAAQ,YAAY,QAAQ,IAAI;gBACjD,8CAA8C;gBAC9C,WAAW,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;gBACpE,aAAa;gBACb;YACF;YAEA,IAAI;gBACF,yCAAyC;gBACzC,IAAI,CAAA,GAAA,oHAAA,CAAA,uBAAoB,AAAD,EAAE,MAAM;oBAC7B,4CAA4C;oBAC5C,MAAM,aAAa,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE;oBACzC,QAAQ,GAAG,CAAC,+BAA+B;oBAC3C,WAAW;gBACb,OAAO;oBACL,gDAAgD;oBAChD,WAAW;gBACb;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,WAAW,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;YACtE;YAEA,oBAAoB;YACpB,SAAS;YACT,aAAa;QACf;kCAAG;QAAC;QAAK;QAAK;KAAa;IAE3B,sCAAsC;IACtC,MAAM,gBAAgB,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD,EAAE,gBAAgB,KAAK,cAAc;IAE/E,6DAA6D;IAC7D,MAAM,WAAW,SAAS,CAAC,UAAU,gBAAgB;IAErD,MAAM,aAAa;QACjB,aAAa;IACf;IAEA,MAAM,cAAc;QAClB,QAAQ,IAAI,CAAC,CAAC,sBAAsB,EAAE,SAAS;QAC/C,SAAS;QACT,aAAa;IACf;IAEA,uDAAuD;IACvD,IAAI,CAAC,UAAU;QACb,qBACE,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE;gBAAO;gBAAQ,YAAY;YAAU;sBAE9C,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBAAqB;IACrB,MAAM,aAAkB;QACtB,KAAK;QACL,KAAK,OAAO;QACZ,OAAO;QACP,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,GAAG,KAAK;QACR,WAAW,GAAG,MAAM,SAAS,IAAI,GAAG,CAAC,EAAE,YAAY,cAAc,cAAc,gCAAgC,CAAC;IAClH;IAEA,4CAA4C;IAC5C,IAAI,UAAU;QACZ,WAAW,QAAQ,GAAG;IACtB,0CAA0C;IAC5C,OAAO,IAAI,SAAS;QAClB,WAAW,OAAO,GAAG;IACvB,OAAO;QACL,WAAW,OAAO,GAAG;IACvB;IAEA,qBACE,6LAAC;QAAI,WAAU;QAA2B,OAAO;YAAE,YAAY;QAAU;;YACtE,2BACC,6LAAC;gBACC,WAAU;gBACV,eAAY;0BAEZ,cAAA,6LAAC;oBAAI,WAAU;;;;;;;;;;;0BAInB,6LAAC,gIAAA,CAAA,UAAK;gBAAE,GAAG,UAAU;;;;;;;;;;;;AAG3B;GA7GwB;KAAA","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/components/ProductCard.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { Product } from '../lib/types';\nimport { useCart } from '../lib/cartContext';\nimport { useState } from 'react';\nimport FirebaseImage from './FirebaseImage';\nimport toast from 'react-hot-toast';\n\ninterface ProductCardProps {\n  product: Product;\n  priority?: boolean;\n}\n\nexport default function ProductCard({ product, priority = false }: ProductCardProps) {\n  const { addItem } = useCart();\n  const [isHovered, setIsHovered] = useState(false);\n  \n  const handleAddToCart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    addItem(product);\n    toast.success(`Added ${product.name} to cart`);\n  };\n\n  return (\n    <Link \n      href={`/products/${product.id}`}\n      className=\"group relative card-shadow bg-white rounded-md overflow-hidden transition-all duration-300\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <div className=\"w-full bg-gray-100 overflow-hidden aspect-square relative\">\n        <FirebaseImage\n          src={product.images[0]}\n          alt={product.name}\n          className={`w-full h-full object-cover object-center transition-opacity duration-300 ${\n            isHovered && product.images.length > 1 ? 'opacity-0' : 'opacity-100'\n          }`}\n          width={300}\n          height={300}\n          priority={priority}\n          fallbackText={product.name}\n        />\n        {product.images.length > 1 && (\n          <FirebaseImage\n            src={product.images[1]}\n            alt={`${product.name} - secondary view`}\n            className={`w-full h-full object-cover object-center absolute inset-0 transition-opacity duration-300 ${\n              isHovered ? 'opacity-100' : 'opacity-0'\n            }`}\n            width={300}\n            height={300}\n            fallbackText={`${product.name} - alt`}\n          />\n        )}\n        \n        {/* Hover action button */}\n        <button\n          onClick={handleAddToCart}\n          className={`absolute bottom-4 right-4 bg-[#ff7043] text-white py-2 px-3 rounded-full transition-all duration-300 shadow-md ${\n            isHovered ? 'translate-y-0 opacity-100' : 'translate-y-2 opacity-0'\n          }`}\n        >\n          <svg className=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n          </svg>\n        </button>\n      </div>\n      \n      <div className=\"p-4\">\n        <h3 className=\"text-sm text-gray-700 font-medium truncate\">{product.name}</h3>\n        <p className=\"mt-1 text-lg font-semibold text-gray-900\">${product.price.toFixed(2)}</p>\n        \n        {product.rating && (\n          <div className=\"mt-1 flex items-center\">\n            <div className=\"flex items-center\">\n              {[0, 1, 2, 3, 4].map((rating) => (\n                <svg\n                  key={rating}\n                  className={`h-3 w-3 ${\n                    product.rating! > rating ? 'text-yellow-400' : 'text-gray-300'\n                  }`}\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                >\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                </svg>\n              ))}\n            </div>\n            <p className=\"ml-1 text-xs text-gray-500\">({product.reviews})</p>\n          </div>\n        )}\n        \n        {product.stock <= 5 && product.stock > 0 && (\n          <div className=\"mt-1\">\n            <p className=\"text-xs text-orange-600\">Only {product.stock} left</p>\n          </div>\n        )}\n        \n        {product.stock === 0 && (\n          <div className=\"mt-1\">\n            <p className=\"text-xs text-red-600\">Out of stock</p>\n          </div>\n        )}\n      </div>\n    </Link>\n  );\n} "],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAOe,SAAS,YAAY,EAAE,OAAO,EAAE,WAAW,KAAK,EAAoB;;IACjF,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,sHAAA,CAAA,UAAO,AAAD;IAC1B,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,kBAAkB,CAAC;QACvB,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,QAAQ;QACR,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,QAAQ,IAAI,CAAC,QAAQ,CAAC;IAC/C;IAEA,qBACE,6LAAC,+JAAA,CAAA,UAAI;QACH,MAAM,CAAC,UAAU,EAAE,QAAQ,EAAE,EAAE;QAC/B,WAAU;QACV,cAAc,IAAM,aAAa;QACjC,cAAc,IAAM,aAAa;;0BAEjC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+HAAA,CAAA,UAAa;wBACZ,KAAK,QAAQ,MAAM,CAAC,EAAE;wBACtB,KAAK,QAAQ,IAAI;wBACjB,WAAW,CAAC,yEAAyE,EACnF,aAAa,QAAQ,MAAM,CAAC,MAAM,GAAG,IAAI,cAAc,eACvD;wBACF,OAAO;wBACP,QAAQ;wBACR,UAAU;wBACV,cAAc,QAAQ,IAAI;;;;;;oBAE3B,QAAQ,MAAM,CAAC,MAAM,GAAG,mBACvB,6LAAC,+HAAA,CAAA,UAAa;wBACZ,KAAK,QAAQ,MAAM,CAAC,EAAE;wBACtB,KAAK,GAAG,QAAQ,IAAI,CAAC,iBAAiB,CAAC;wBACvC,WAAW,CAAC,0FAA0F,EACpG,YAAY,gBAAgB,aAC5B;wBACF,OAAO;wBACP,QAAQ;wBACR,cAAc,GAAG,QAAQ,IAAI,CAAC,MAAM,CAAC;;;;;;kCAKzC,6LAAC;wBACC,SAAS;wBACT,WAAW,CAAC,+GAA+G,EACzH,YAAY,8BAA8B,2BAC1C;kCAEF,cAAA,6LAAC;4BAAI,WAAU;4BAAU,OAAM;4BAA6B,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCACjG,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;0BAK3E,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA8C,QAAQ,IAAI;;;;;;kCACxE,6LAAC;wBAAE,WAAU;;4BAA2C;4BAAE,QAAQ,KAAK,CAAC,OAAO,CAAC;;;;;;;oBAE/E,QAAQ,MAAM,kBACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ;oCAAC;oCAAG;oCAAG;oCAAG;oCAAG;iCAAE,CAAC,GAAG,CAAC,CAAC,uBACpB,6LAAC;wCAEC,WAAW,CAAC,QAAQ,EAClB,QAAQ,MAAM,GAAI,SAAS,oBAAoB,iBAC/C;wCACF,OAAM;wCACN,SAAQ;wCACR,MAAK;kDAEL,cAAA,6LAAC;4CAAK,GAAE;;;;;;uCARH;;;;;;;;;;0CAYX,6LAAC;gCAAE,WAAU;;oCAA6B;oCAAE,QAAQ,OAAO;oCAAC;;;;;;;;;;;;;oBAI/D,QAAQ,KAAK,IAAI,KAAK,QAAQ,KAAK,GAAG,mBACrC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;;gCAA0B;gCAAM,QAAQ,KAAK;gCAAC;;;;;;;;;;;;oBAI9D,QAAQ,KAAK,KAAK,mBACjB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;sCAAuB;;;;;;;;;;;;;;;;;;;;;;;AAMhD;GA/FwB;;QACF,sHAAA,CAAA,UAAO;;;KADL","debugId":null}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file://G%3A/PORTFOLIO/e-commerce-store/app/%28main%29/products/category/%5Bcategory%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use } from 'react';\r\nimport Link from 'next/link';\r\nimport { getProductsByCategory } from '../../../../../lib/firebaseUtils';\r\nimport { Product } from '../../../../../lib/types';\r\nimport ProductCard from '../../../../../components/ProductCard';\r\n\r\n// Map category IDs to display names\r\nconst categoryNames: { [key: string]: string } = {\r\n  'electronics': 'Electronics',\r\n  'clothing': 'Clothing',\r\n  'accessories': 'Accessories',\r\n  'furniture': 'Furniture',\r\n  'home': 'Home & Garden',\r\n  'kitchen': 'Kitchen & Home',\r\n};\r\n\r\nconst sortOptions = [\r\n  { value: 'featured', label: 'Featured' },\r\n  { value: 'price-asc', label: 'Price: Low to High' },\r\n  { value: 'price-desc', label: 'Price: High to Low' },\r\n  { value: 'rating', label: 'Customer Rating' },\r\n  { value: 'newest', label: 'Newest Arrivals' },\r\n];\r\n\r\nexport default function CategoryPage({ params }: { params: any }) {\r\n  // Unwrap the params Promise using React.use()\r\n  const unwrappedParams = use(params);\r\n  const categorySlug = unwrappedParams.category;\r\n  \r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [sortBy, setSortBy] = useState('featured');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchProductsByCategory = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Use the Firebase utility to fetch products by category\r\n        const fetchedProducts = await getProductsByCategory(categorySlug);\r\n        setProducts(fetchedProducts);\r\n      } catch (error) {\r\n        console.error('Error fetching products by category:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (categorySlug) {\r\n      fetchProductsByCategory();\r\n    }\r\n  }, [categorySlug]);\r\n\r\n  // Apply sorting\r\n  const sortedProducts = [...products].sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'price-asc':\r\n        return a.price - b.price;\r\n      case 'price-desc':\r\n        return b.price - a.price;\r\n      case 'rating':\r\n        return (b.rating || 0) - (a.rating || 0);\r\n      case 'newest':\r\n        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n      default:\r\n        // 'featured' - no additional sorting\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  const displayName = categoryNames[categorySlug] || categorySlug;\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\r\n      <div className=\"pb-6\">\r\n        <Link href=\"/\" className=\"text-indigo-600 hover:text-indigo-800 flex items-center\">\r\n          <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n          </svg>\r\n          Back to Home\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"border-b border-gray-200 pb-6\">\r\n        <h1 className=\"text-3xl font-extrabold tracking-tight text-gray-900\">{displayName}</h1>\r\n        <p className=\"mt-2 text-sm text-gray-500\">\r\n          {products.length} products\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"pt-6 pb-10\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h2 className=\"text-sm font-medium text-gray-700\">Filter by</h2>\r\n            {/* Add filter options here if needed */}\r\n          </div>\r\n          <div className=\"flex items-center\">\r\n            <span className=\"text-sm text-gray-700 mr-2\">Sort by</span>\r\n            <select\r\n              value={sortBy}\r\n              onChange={(e) => setSortBy(e.target.value)}\r\n              className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n            >\r\n              {sortOptions.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n          {[1, 2, 3, 4, 5, 6].map((placeholder) => (\r\n            <div key={placeholder} className=\"animate-pulse\">\r\n              <div className=\"bg-gray-200 rounded-lg h-64 mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : products.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <svg\r\n            className=\"mx-auto h-12 w-12 text-gray-400\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n            />\r\n          </svg>\r\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No products found</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            We couldn't find any products in this category.\r\n          </p>\r\n          <div className=\"mt-6\">\r\n            <Link\r\n              href=\"/\"\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n            >\r\n              Browse All Products\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n          {sortedProducts.map((product) => (\r\n            <ProductCard key={product.id} product={product} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}